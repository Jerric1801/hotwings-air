<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rebook your flight</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="/form.css">
    <style>
    </style>
    <script src=""></script>
</head>
<body>
    <div class="header">
        <img src="/logo.svg">
    </div>

    <div class="rebook">
        <h1>Rebook your flight</h1>

        <div class="divider"></div>

        <p>We are sorry that your flight <%= flight_number %> on <%= departure %> has been disrupted.</p>
        <div>
            Please take a look at the recommended options below if you would like to rebook your flight.
        </div>
        <div class="flight_options">
            <% recommended_flights.forEach(flight => { %>
                <div class="flight_option" id="<%= flight._id %>" onclick=selected_flight(this)>
                    <div class="field">
                        <div>Date:</div>
                        <div class="highlight"><%= flight.departure %></div>
                    </div>
                    <div class="field">
                        <div>Flight:</div>
                        <div class="highlight"><%= flight.flight_number %></div>
                    </div>
                    <div class="field">
                        <div>Seats left:</div>
                        <div class="highlight"><%= flight.availability %></div>
                    </div>
                </div>
            <% }) %>
        </div>

        <div class="divider"></div>

        <div class="<%= recommended_accommodation.length === 0 ? 'hidden' : '' %>">
            <div>
                Since there are no longer flights available today, please take a look at the recommended accommodation options below.
            </div>
            <div class="accommodation_options" onclick=selected>
                <% recommended_accommodation.forEach(hotel => { %>
                    <div class="accommodation_option" id="<%= hotel._id %>" onclick=selected_accommodation(this)>
                        <div class="field">
                            <div>Hotel:</div>
                            <div class="highlight"><%= hotel.hotel_name %></div>
                        </div>
                        <div class="field">
                            <div>Rooms:</div>
                            <div class="highlight"><%= hotel.availability %></div>
                        </div>
                    </div>
                <% }) %>
            </div>
        </div>

        <div class="divider"></div>

        <div class="submission">
            <div class="submitBtn" onclick=submit()>Submit</div>
        </div>
    </div>

    <script>
        const flight_options = document.getElementsByClassName('flight_option');
        const accommodation_options = document.getElementsByClassName('accommodation_option');

        function selected_flight(id) {
            let selected = id.id;
            for (let i of flight_options) {
                if (i.id == selected) {
                    i.classList.add('selected');
                } else {
                    if (i.classList.contains('selected')) {
                        i.classList.remove('selected');
                    }
                }
            }
        }

        function selected_accommodation(id) {
            let selected = id.id;
            for (let i of accommodation_options) {
                if (i.id == selected) {
                    i.classList.add('selected');
                } else {
                    if (i.classList.contains('selected')) {
                        i.classList.remove('selected');
                    }
                }
            }
        }

        function submit() {
            let selections = document.getElementsByClassName('selected');
            for (let i of selections) {
                console.log(i);
            }
        }
    </script>

</body>
</html>