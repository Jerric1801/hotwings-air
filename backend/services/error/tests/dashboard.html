<link rel="stylesheet" href="dashboard.css">

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logs Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        .container {
            padding: 20px;
        }

        section {
            margin-bottom: 20px;
        }

        .log {
            background-color: #f2f2f2;
            border: 1px solid #ddd;
            margin-top: 10px;
            padding: 10px;
        }
    </style>
</head>

<body>
    <div>
        <section>
            <h1>Log Overview Dashboard</h1>
            <p>This dashboard is meant to provide an overview across your collected logs.
                You can add more logs using our integrations.</p>
        </section>
    </div>
    <div class="container">
        <section id="errorLogs">
            <h2>Error Logs</h2>
            <!-- Logs will be appended here -->
        </section>

        <section id="transactionLogs">
            <h2>Transaction Logs</h2>
            <!-- Logs will be appended here -->
        </section>

        <section id="userLogs">
            <h2>User Logs</h2>
            <!-- Logs will be appended here -->
        </section>

        <section id="flightInventoryLogs">
            <h2>Flight Inventory Logs</h2>
            <!-- Logs will be appended here -->
        </section>

        <section id="accomodationInventoryLogs">
            <h2>Accomodation Inventory Logs</h2>
            <!-- Logs will be appended here -->
        </section>


    </div>

    <script>
        function fetchLogs(endpoint, elementId) {
            fetch(endpoint)
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById(elementId);
                    // Create a table
                    const table = document.createElement('table');
                    table.style.width = '100%';
                    table.setAttribute('border', '1');
                    // Create the table header
                    const thead = document.createElement('thead');
                    let headerRow = `<tr>`;
                    // Assuming all objects in data array have the same keys, use the first one to generate headers
                    if (data.length > 0) {
                        Object.keys(data[0]).forEach(key => {
                            headerRow += `<th>${key}</th>`;
                        });
                    }
                    headerRow += `</tr>`;
                    thead.innerHTML = headerRow;
                    table.appendChild(thead);

                    // Create table body
                    const tbody = document.createElement('tbody');
                    data.forEach(log => {
                        let row = `<tr>`;
                        Object.values(log).forEach(val => {
                            row += `<td>${val}</td>`;
                        });
                        row += `</tr>`;
                        tbody.innerHTML += row;
                    });
                    table.appendChild(tbody);

                    // Append the table to the container
                    container.appendChild(table);
                })
                .catch(error => console.error('Error fetching logs:', error));
        }

        // Fetching logs for each section (replace with actual urls)
        fetchLogs('http://localhost:3000/logs', 'errorLogs');
        fetchLogs('http://localhost:3000/transactionLogs', 'transactionLogs');
        fetchLogs('http://localhost:3000/userLogs', 'userLogs');
        fetchLogs('http://localhost:3000/flightInventoryLogs', 'flightInventoryLogs');
        fetchLogs('http://localhost:3000/accomodationInventoryLogs', 'accoodationInventoryLogs');
    </script>

</body>

</html>